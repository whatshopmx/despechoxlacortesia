/**
 * Modelos para las cartas emocionales de La Loter√≠a del Despecho
 */

// Tipos de voces narrativas
export enum NarrativeVoice {
  CANTINERO_POETA = "Cantinero Poeta",
  TIA_CHISMOSA = "T√≠a Chismosa",
  BOT_SARCASTICO = "Bot Sarc√°stico",
  EX_ARREPENTIDO = "Ex Arrepentido",
  CONSEJERA_EMOCIONAL = "Consejera Emocional",
  COACH_RUPTURAS = "Coach de Rupturas",
  EX_BOT = "Ex-Bot",
}

// Tipos de emociones base
export enum EmotionalTone {
  DESPECHO = "despecho",
  IRONIA = "iron√≠a",
  VULNERABILIDAD = "vulnerabilidad",
  NOSTALGIA = "nostalgia",
  CAOS_ROMANTICO = "caos rom√°ntico",
}

// Tipos de lenguaje estil√≠stico
export enum StylisticLanguage {
  EMOJIS_SPANGLISH = "Emojis + Spanglish",
  IRONIA_CRUDA = "Iron√≠a Cruda",
  POESIA_CHAFA = "Poes√≠a Chafa",
  JERGA_DIGITAL = "Jerga Digital",
  TERAPIA_MEME = "Terapia de Meme",
}

// Tipos de g√©neros musicales
export enum GenreTag {
  REGGAETON_SAD = "Reggaet√≥n Sad",
  CUMBIA_DEL_OLVIDO = "Cumbia del Olvido",
  CORRIDOS_DEL_ALMA = "Corridos del Alma",
  TERAPIA_EXPRESS = "Terapia Express",
}

// Tipos de stickers
export enum StickerType {
  CORAZON_ROTO = "üíî Coraz√≥n Roto‚Ñ¢",
  PAYASO_OFICIAL = "ü§° Payaso Oficial",
  TEXTO_MAL_MANDADO = "üí¨ Texto Mal Mandado",
  CAUSA_CAOS = "üß® Causa Caos",
  VOZ_TELENOVELA = "üé§ Voz de Telenovela",
  VERGUENZA_AJENA = "üíÉ Verg√ºenza Ajena",
  CHICLE_EMOCIONAL = "üß∏ Chicle Emocional",
  RED_FLAG_FLAG = "üö© Red Flag Flag",
  MODO_DRAMATICA = "üé≠ Modo Dram√°tica",
  SOBREPENSAR = "üß† Sobrepensar S.A.",
  FACEPALM_TOTAL = "ü´£ Facepalm Total",
  TENSION_GENERADA = "ü´¶ Tensi√≥n Generada",
  RUGIDO_INTERNO = "ü¶Å Rugido Interno",
}

// Niveles de caos
export enum ChaosLevel {
  MILD = "mild",
  INTENSE = "intense",
  CHAOTIC = "chaotic",
}

// Niveles de riesgo social
export enum SocialRisk {
  LOW = "low",
  MEDIUM = "medium",
  HIGH = "high",
}

// Modelo para la canci√≥n de Spotify
export interface SpotifySong {
  title: string
  artist: string
  url: string
}

// Modelo para la recompensa
export interface Reward {
  tipo: "digital" | "physical" | "stickers"
  descripcion: string
}

// Modelo para la carta emocional
export interface EmotionalCardModel {
  card_title: string
  challenge: string
  genre_tag: GenreTag
  emotional_tier: ChaosLevel
  spotify_song: SpotifySong
  ai_backup_response: string
  social_trigger: string
  reward: string | Reward
  sticker_integration?: string
  narrative_voice?: NarrativeVoice
  emotional_tone?: EmotionalTone
  stylistic_language?: StylisticLanguage
}

// Modelo para el combo de stickers
export interface StickerCombo {
  nombre_combo: string
  stickers_necesarios: StickerType[]
  efecto_grupal: string
  premio: Reward
}

// Cartas predefinidas basadas en el documento
export const PREDEFINED_CARDS: EmotionalCardModel[] = [
  {
    card_title: "üé§ El Coro que Nunca Le Dedicaste üî•",
    challenge:
      "Canta el coro de una canci√≥n que siempre quisiste dedicar pero nunca tuviste el valor... ¬°hasta ahora! El grupo debe adivinar si es por amor, despecho o locura. Puedes usar l√°grimas falsas, micr√≥fono de pl√°tano o efectos de sonido ambientales.",
    genre_tag: GenreTag.REGGAETON_SAD,
    emotional_tier: ChaosLevel.INTENSE,
    spotify_song: {
      title: "Haw√°i",
      artist: "Maluma",
      url: "https://open.spotify.com/track/1yoMvmasuxZfqHkrJmwgLz",
    },
    ai_backup_response:
      "¬°Eras mi destino, pero el karma te traicion√≥! Este micr√≥fono es mi √∫nico consuelo... (pausa dram√°tica) ¬°C√°ntalo conmigo, mundo cruel! (sollozo falso + sonido de viento teatral)",
    social_trigger:
      "Si al menos 3 personas juran que pondr√≠an tu coro en su playlist 'Emo del Verano', ganas el derecho de elegir la pr√≥xima canci√≥n (y exigir que se canten todos los versos).",
    reward:
      "Premio a la Valentina Fallida: Todos deben hacer playback de tu coro con un coraz√≥n gigante hecho de servilletas arrugadas y un '¬°Qu√© fuerte!' colectivo.",
    narrative_voice: NarrativeVoice.CANTINERO_POETA,
    emotional_tone: EmotionalTone.DESPECHO,
    stylistic_language: StylisticLanguage.JERGA_DIGITAL,
    sticker_integration: "Ganas el sticker üé§ Voz de Telenovela si logras que alguien llore durante tu interpretaci√≥n.",
  },
  {
    card_title: "üíî El Ex-Bot que Nunca Silencia üîßüíî",
    challenge:
      "Usa la voz de Ex-Bot para narrar tu peor momento post-ruptura como si fuera un informe t√©cnico. Ejemplo: 'Error 404: Amor no encontrado. Causa: red flags m√∫ltiples en fase cr√≠tica.'",
    genre_tag: GenreTag.CORRIDOS_DEL_ALMA,
    emotional_tier: ChaosLevel.CHAOTIC,
    spotify_song: {
      title: "Me Va a Extra√±ar",
      artist: "Luis Fonsi",
      url: "https://open.spotify.com/track/3C4ML1koYbc8leu72fv9vV",
    },
    ai_backup_response:
      "Probabilidad de reconciliaci√≥n: 0.0001%. Diagn√≥stico: S√≠ndrome de Apego T√≥xico v3.0. Recomendaci√≥n: Formatear coraz√≥n y reinstalar autoestima. Actualizaci√≥n disponible en App Store del Alma.",
    social_trigger:
      "Si al menos 3 personas r√≠en mientras asienten con 'esto es 100% mi vida', ganas el derecho de forzar a otro jugador a recibir un 'diagn√≥stico' personalizado.",
    reward: "Certificado digital: 'Ingeniero Emocional Certificado (IEC)' + filtro AR de error 404 en rostro",
    narrative_voice: NarrativeVoice.EX_BOT,
    emotional_tone: EmotionalTone.IRONIA,
    stylistic_language: StylisticLanguage.TERAPIA_MEME,
    sticker_integration:
      "Ganas el sticker üíî Coraz√≥n Roto‚Ñ¢ al completar 2 diagn√≥sticos t√©cnicos de relaciones fallidas.",
  },
  {
    card_title: "üé≠ El Meme que Tu Ex No Ver√° üß†üò≠",
    challenge:
      "Usa la letra de 'Me Va a Extra√±ar' de Luis Fonsi para crear un meme que resuma tu mayor catarsis post-ruptura. Ejemplo: 'Cuando dices \"estoy bien\" pero tu playlist es puro Luis Fonsi'. El grupo vota el m√°s terap√©utico y el m√°s rid√≠culo.",
    genre_tag: GenreTag.CORRIDOS_DEL_ALMA,
    emotional_tier: ChaosLevel.INTENSE,
    spotify_song: {
      title: "Me Va a Extra√±ar",
      artist: "Luis Fonsi",
      url: "https://open.spotify.com/track/3C4ML1koYbc8leu72fv9vV",
    },
    ai_backup_response:
      'Caption de meme generado por Coach de Rupturas: \'Cuando √©l dice "me va a extra√±ar" pero t√∫ ya est√°s en la fase de "me va a bloquear y punto". #DolorDulce #TerapiaDeMeme\'',
    social_trigger:
      "Si al menos 3 personas guardan tu meme en sus favoritos o lo usan como story, ganas el derecho de elegir la pr√≥xima canci√≥n del karaoke (y exigir coreograf√≠a grupal).",
    reward:
      "Filtro digital: 'Dignificador 3000' (hace que cualquier foto tuya luzca como si hubieras superado todo con estilo).",
    narrative_voice: NarrativeVoice.COACH_RUPTURAS,
    emotional_tone: EmotionalTone.CAOS_ROMANTICO,
    stylistic_language: StylisticLanguage.TERAPIA_MEME,
    sticker_integration: "Ganas el sticker üß∏ Chicle Emocional al crear un meme que active risa + ternura colectiva.",
  },
  {
    card_title: "üéµ La Playlist que Nunca Le Dedicaste üî•",
    challenge:
      "Crea una playlist de 5 canciones que resuman tu vida amorosa. El grupo analiza tu estado emocional basado en tu selecci√≥n. Ejemplo: Si incluyes 3 canciones de Shakira, explica tu fase 'exorcismo con ritmo'.",
    genre_tag: GenreTag.REGGAETON_SAD,
    emotional_tier: ChaosLevel.MILD,
    spotify_song: {
      title: "Haw√°i",
      artist: "Maluma",
      url: "https://open.spotify.com/track/1yoMvmasuxZfqHkrJmwgLz",
    },
    ai_backup_response:
      "Coach de Rupturas analiza: 'Tu playlist indica S√≠ndrome de Apego T√≥xico v2.0: 40% despecho, 30% nostalgia, 30% 'soy adicta al dolor'. Recomendaci√≥n: A√±ade una canci√≥n de empoderamiento y borra 'Despacito' de tu vida.'",
    social_trigger: "Si el diagn√≥stico del grupo coincide con tu situaci√≥n real, desbloqueas la cortes√≠a.",
    reward: "Playlist digital: 'Soundtrack de mi Ex' + filtro AR de 'Playlist Killer'.",
    narrative_voice: NarrativeVoice.BOT_SARCASTICO,
    emotional_tone: EmotionalTone.CAOS_ROMANTICO,
    stylistic_language: StylisticLanguage.IRONIA_CRUDA,
    sticker_integration: "Ganas el sticker üß® Causa Caos si tu playlist incluye >3 canciones de despecho en 1 minuto.",
  },
  {
    card_title: "üí¨ El Mensaje que Nunca Enviaste üì±üíî",
    challenge:
      "Muestra o recrea el mensaje m√°s atrevido que has enviado por redes para conquistar a alguien. El grupo eval√∫a su efectividad. Ejemplo: 'Hola, ¬øc√≥mo est√°s? (y s√≠, te sigo en Instagram)'.",
    genre_tag: GenreTag.REGGAETON_SAD,
    emotional_tier: ChaosLevel.MILD,
    spotify_song: {
      title: "Contigo",
      artist: "Calibre 50",
      url: "https://open.spotify.com/track/4sUPUtUwactN4hCH3ghrq2",
    },
    ai_backup_response:
      "Coach de Rupturas analiza: 'Tu mensaje indica un 80% de valent√≠a y 20% de 'ojal√° no me bloquee'. Recomendaci√≥n: A√±ade un emoji de coraz√≥n y borra 'Hola, ¬øc√≥mo est√°s?'.'",
    social_trigger: "Si el diagn√≥stico del grupo coincide con tu situaci√≥n real, desbloqueas la cortes√≠a.",
    reward: "Filtro digital: 'Tears but Make it Aesthetic' + certificado 'Influencer de Desamor'.",
    narrative_voice: NarrativeVoice.TIA_CHISMOSA,
    emotional_tone: EmotionalTone.VULNERABILIDAD,
    stylistic_language: StylisticLanguage.EMOJIS_SPANGLISH,
    sticker_integration:
      "Ganas el sticker üí¨ Texto Mal Mandado si tu mensaje incluye >3 errores ortogr√°ficos y un 'jeje' final.",
  },
]

// Combos de stickers predefinidos
export const STICKER_COMBOS: StickerCombo[] = [
  {
    nombre_combo: "Karaoke Ca√≥tico",
    stickers_necesarios: [StickerType.VOZ_TELENOVELA, StickerType.VERGUENZA_AJENA, StickerType.PAYASO_OFICIAL],
    efecto_grupal:
      "Todos deben cantar 'Haw√°i' de Maluma con voz oper√°tica y coreograf√≠a rid√≠cula. La persona con peor interpretaci√≥n recibe el sticker 'Payaso Oficial' adicional.",
    premio: {
      tipo: "digital",
      descripcion:
        "Playlist 'Soundtrack de mi Ex' + filtro AR de coro de fantasmas cantando '¬øYa viste que subi√≥ una story?'",
    },
  },
  {
    nombre_combo: "Cerebro Apagado",
    stickers_necesarios: [StickerType.PAYASO_OFICIAL, StickerType.CAUSA_CAOS, StickerType.RED_FLAG_FLAG],
    efecto_grupal: "El grupo habla solo con emojis durante una ronda.",
    premio: {
      tipo: "digital",
      descripcion:
        "Badge 'Emoji Master' + derecho a forzar a otro jugador a hablar solo con emojis por una ronda adicional.",
    },
  },
  {
    nombre_combo: "Barra Libre de Excusas",
    stickers_necesarios: [StickerType.TEXTO_MAL_MANDADO, StickerType.PAYASO_OFICIAL, StickerType.CORAZON_ROTO],
    efecto_grupal: "Todos inventan excusas absurdas para no contestar un chat (ej.: 'Estaba meditando con delfines').",
    premio: {
      tipo: "digital",
      descripcion: "Generador de excusas premium + certificado 'Maestro de la Evasi√≥n Emocional'.",
    },
  },
  {
    nombre_combo: "Duelo Colectivo",
    stickers_necesarios: [StickerType.CORAZON_ROTO, StickerType.CHICLE_EMOCIONAL, StickerType.TEXTO_MAL_MANDADO],
    efecto_grupal: "Todos comparten historias de 'me dej√≥ en visto'. El grupo vota la m√°s dolorosa.",
    premio: {
      tipo: "digital",
      descripcion: "NFT 'Mensaje en Botella Digital' + filtro AR de 'Visto pero Ignorado'.",
    },
  },
]

// Funci√≥n para obtener una carta aleatoria
export function getRandomCard(): EmotionalCardModel {
  return PREDEFINED_CARDS[Math.floor(Math.random() * PREDEFINED_CARDS.length)]
}

// Funci√≥n para obtener un combo por stickers
export function getComboByStickers(stickers: StickerType[]): StickerCombo | null {
  return (
    STICKER_COMBOS.find((combo) =>
      combo.stickers_necesarios.every((requiredSticker) => stickers.includes(requiredSticker)),
    ) || null
  )
}
